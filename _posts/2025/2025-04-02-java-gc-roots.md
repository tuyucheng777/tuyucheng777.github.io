---
layout: post
title:  垃圾收集器根指南
category: java-jvm
copyright: java-jvm
excerpt: JVM
---

## 1. 概述

在本教程中，我们将了解垃圾回收器根(GC根)是什么。此外，我们将描述GC根的类型。之后，我们将展示GC根和活跃对象之间的区别。

## 2. GC根定义

让我们首先定义什么是GC根，GC根是Java[垃圾回收](https://www.baeldung.com/java-system-gc#garbage%20collection)上下文中使用的术语。**它们是垃圾回收器的特殊对象**，顾名思义，GC根是垃圾回收器进程的起点。通常，从GC根直接或间接引用的所有对象都不会被垃圾回收。

## 3. GC根的类型

让我们看一下GC根的主要类型：

-   类：由系统类加载器加载的类；还包含对静态变量的引用
-   本地栈：存储在本地栈上的方法的局部变量和参数
-   活跃Java线程：所有活动的Java线程
-   JNI引用：为JNI调用创建的本机代码Java对象；包含局部变量、JNI方法的参数和全局JNI引用

此外，还有几种可能的GC根类型：

-   用作同步监视器的对象
-   由JVM实现定义的特定对象，这些对象不会被垃圾回收。这些对象可能包含重要的异常类、系统类加载器或自定义类加载器

**此外，JVM没有关于哪些特定对象是GC根的文档**。一些流行的Java IDE提供了从GC根源角度[分析内存](https://www.jetbrains.com/help/idea/analyze-hprof-memory-snapshots.html#read-snapshot)的功能，这在分析应用程序中的[内存泄漏](https://www.baeldung.com/java-memory-leaks)时很有用。

## 4. GC根与存活对象

现在让我们看一下垃圾回收过程中定义的存活对象。

**应用程序主动使用的所有对象对于GC来说都是存活对象**。此外，垃圾回收器不会删除存活对象。**GC根是一种特殊类型的存活对象**，因此，根据定义，所有GC根都是活跃对象。

## 5. GC根的垃圾回收器使用

现在让我们看一下GC根在垃圾回收过程中的用法。

**事实上，HotSpot JVM中的所有GC实现都是[跟踪收集器](https://www.baeldung.com/java-gc-cyclic-references#tracing-gcs)**。GC通过遍历对象图来识别所有存活对象。此外，访问并标记为活动的对象不会被垃圾回收。为了能够遍历图，起点是必要的。因此，**GC根是跟踪收集器的起点**。

GC从根开始遍历图，并将图中所有访问过的对象标记为存活，该过程针对应用程序中定义的每个GC根执行。此外，它处理从所有GC根开始的所有图。然后，它将所有访问过的对象标记为活动对象。之后，所有未访问过的对象都将被垃圾回收。

## 6. 总结

在这篇简短的文章中，我们解释了什么是GC根。然后，我们描述了GC根的类型。接下来，我们展示了GC根和存活对象之间的区别。最后，我们解释了GC根在垃圾回收过程中的使用。